
%% Definicion de Estilos
\DefineCodeSection[true]{StyleColors}
\DefineCodeSection[true]{StyleUnits}
\DefineCodeSection[true]{StyleBibliography}
\DefineCodeSection[true]{StyleLayout}
\DefineCodeSection[true]{Stylereflinks}
\DefineCodeSection[true]{StyleHeadFoot}
\DefineCodeSection[true]{StyleHeadings}
\DefineCodeSection[true]{StyleFixes}


% --------------------------------------------------------------------
% Colores
% --------------------------------------------------------------------

\BeginCodeSection{StyleColors}
\IfMultDefined{definecolor,colorlet}{%
    % Definicion de colores
    % Colores UV
    \definecolor{UVBlue}{RGB}{0, 60, 88}
    \definecolor{UVDarkBlue}{RGB}{0, 46, 56}
    \definecolor{UVTurquoise}{RGB}{6, 113, 126}
}

\EndCodeSection{StyleColors}

% --------------------------------------------------------------------
% Unidades
% --------------------------------------------------------------------

\BeginCodeSection{StyleUnits}
\input{preamble/styleconfs/siunitx.tex}
\EndCodeSection{StyleUnits}

% --------------------------------------------------------------------
% Bibliografia
% --------------------------------------------------------------------

\BeginCodeSection{StyleBibliography}
\input{preamble/styleconfs/biblatex.tex}

% Si no se ha cargado biblatex, se carga el estilo plainnat
\IfPackageNotLoaded{biblatex}{%
    \bibliographystyle{plainnat}
}

\KOMAoptions{%
    bibliography=openstyle, % Estilo de la bibliografia
}

\EndCodeSection{StyleBibliography}

% --------------------------------------------------------------------
% Layout
% --------------------------------------------------------------------

\BeginCodeSection{StyleLayout}

\raggedbottom % Evita que el texto se distribuya uniformemente en la p치gina

\IfPackageLoaded{geometry}{%
    \input{preamble/styleconfs/geometry.tex}
}

% Koma Layout
\KOMAoptions{%
    headlines=2.1, % Tama침o de la cabecera
    cleardoublepage=empty, % Pagina en blanco despues de capitulo
}

\EndCodeSection{StyleLayout}

% --------------------------------------------------------------------
% Hyperlinks
% --------------------------------------------------------------------

\BeginCodeSection{Stylereflinks}    
\input{preamble/styleconfs/hyperref.tex}

\IfPackageLoaded{bookmark}{%
    \bookmarksetup{%
        page=1,        % Pagina de inicio
        open=true,     % Abre el bookmark
        openlevel=2,   % Nivel de apertura
        depth=4,       % Profundidad
        numbered=true, % Numerado
    }%
}

\EndCodeSection{Stylereflinks}

% --------------------------------------------------------------------
% Encabezado y pie de pagina
% --------------------------------------------------------------------

\BeginCodeSection{StyleHeadFoot}
% Encabezado y pie de pagina con scrlayer-scrpage
\input{preamble/styleconfs/scrlayer-scrpage.tex}
\EndCodeSection{StyleHeadFoot}

% --------------------------------------------------------------------
% Cabezera y secciones
% --------------------------------------------------------------------

\BeginCodeSection{StyleHeadings}

% Profundidad de numeracion de secciones
\setcounter{secnumdepth}{2} % Numeracion de subsecciones

\KOMAoptions{%
    headings=small, % Tama침o de las cabeceras
    numbers=noenddot, % Sin punto al final de la numeracion
}

\IfDefined{chapter}{%
    \KOMAoptions{%
        headings=noappendixprefix, % Sin prefijo en los apendices
        headings=chapterprefix,    % Prefijo en los capitulos
        headings=openright,        % Capitulos en paginas impares
    }%    
}%

% Alineacion de los capitulos y secciones
\renewcommand*{\raggedchapter}{\raggedleft} % Alineacion de los capitulos
\renewcommand*{\raggedsection}{\raggedright} % Alineacion de las secciones

%% Tama침o de las fuentes
% Capitulos
\IfDefined{chapter}{%
    \setkomafont{chapter}{\Huge\sffamily\itshape\bfseries}
    %\setkomafont{chapterprefix}{\Huge\sffamily\bfseries}
}
% Secciones
\setkomafont{sectioning}{\sffamily\itshape\bfseries}

\setkomafont{paragraph}{\rmfamily\itshape}
\setkomafont{subparagraph}{\rmfamily}

% Partes
\setkomafont{part}{\usekomafont{sectioning}\LARGE}
\setkomafont{partnumber}{\usekomafont{sectioning}\Huge}

% Numeracion de las paginas
\setkomafont{pageheadfoot}{\normalfont\normalcolor\small\sffamily}
\setkomafont{pagenumber}{\normalfont\sffamily\fontshape{b}\selectfont}

%% Color
\IfDefined{color}{%
    \addtokomafont{sectioning}{\color{UVDarkBlue}}
    \IfDefined{chapter}{%
        \addtokomafont{chapter}{\color{UVDarkBlue}}
    }%
}

\EndCodeSection{StyleHeadings}


% --------------------------------------------------------------------
% Fixes de estilo
% --------------------------------------------------------------------

\BeginCodeSection{StyleFixes}

% Numeracion de las paginas


\makeatletter
\@ifundefined{frontmatter}{%
    \newcommand{\frontmatter}{%
        \pagenumbering{roman}
    }
}{}

\@ifundefined{mainmatter}{%
    \newif\if@mainmatter\@mainmattertrue
    \newcommand{\mainmatter}{%
        \pagenumbering{arabic}%
        \setcounter{page}{1}%
    }
}{}
\@ifundefined{backmatter}{%
    \newcommand{\backmatter}{%
        \pagenumbering{roman}
    }
}{}
\makeatother

\EndCodeSection{StyleFixes}